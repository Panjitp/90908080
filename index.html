<!DOCTYPE html>  
<html lang="id">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>Cek Lokasi Pengguna</title>  
    <style>  
        body {  
            font-family: Arial, sans-serif;  
            background-color: #f4f4f4;  
            padding: 20px;  
        }  
        .result {  
            margin-top: 20px;  
            font-size: 20px;  
            font-weight: bold;  
        }  
    </style>  
</head>  
<body>  
    <h1>Cek Lokasi Pengguna</h1>  
    <button id="checkLocation">Cek Lokasi</button>  
    <div class="result" id="result"></div>  

    <script>  
        document.getElementById('checkLocation').addEventListener('click', function() {  
            if (navigator.geolocation) {  
                navigator.geolocation.getCurrentPosition(success, error);  
            } else {  
                document.getElementById('result').innerText = "Geolocation tidak didukung oleh browser ini.";  
            }  
        });  

        function success(position) {  
            const userLatitude = position.coords.latitude;  
            const userLongitude = position.coords.longitude;  

            // Koordinat batas wilayah Kelurahan Tugu  
            const tuguPolygon = [  
                { lat: -6.346835819297786, lng: 106.85668460660116 },  
                { lat: -6.345640620146447, lng: 106.85205175889854 },  
                { lat: -6.355551959454524, lng: 106.84986640657442 },  
                { lat: -6.351943389106576, lng: 106.83566328719004 },  
                { lat: -6.358636888876283, lng: 106.83499083558935 },  
                { lat: -6.369688481477022, lng: 106.83702691403496 },  
                { lat: -6.373190697103012, lng: 106.83953285673728 },  
                { lat: -6.372957216805014, lng: 106.86247789460533 },  
                { lat: -6.3529553438636, lng: 106.85973701977468 },  
                { lat: -6.346835819297786, lng: 106.85668460660116 } // Kembali ke titik awal  
            ];  

            // Periksa apakah pengguna berada di dalam poligon  
            if (isPointInPolygon(userLatitude, userLongitude, tuguPolygon)) {  
                document.getElementById('result').innerText = "Anda berada di Kelurahan Tugu, Kecamatan Cimanggis.";  
            } else {  
                document.getElementById('result').innerText = "Anda tidak berada di Kelurahan Tugu, Kecamatan Cimanggis.";  
            }  
        }  

        function error() {  
            document.getElementById('result').innerText = "Tidak dapat mengakses lokasi Anda.";  
        }  

        // Fungsi untuk memeriksa apakah titik berada di dalam poligon  
        function isPointInPolygon(lat, lng, polygon) {  
            let inside = false;  
            for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {  
                const xi = polygon[i].lat, yi = polygon[i].lng;  
                const xj = polygon[j].lat, yj = polygon[j].lng;  

                const intersect = ((yi > lng) !== (yj > lng)) &&  
                    (xj < (xi - xj) * (lng - yi) / (yj - yi) + xi);  
                if (intersect) inside = !inside;  
            }  
            return inside;  
        }  
    </script>  
</body>  
</html>
